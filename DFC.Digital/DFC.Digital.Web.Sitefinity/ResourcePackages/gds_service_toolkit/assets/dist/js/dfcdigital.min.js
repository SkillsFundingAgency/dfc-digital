var dfc=dfc||{};function sendEmail(e){var s=$("input[name=EmailAddress]").val();s.length&&$(".survey_form")[0].checkValidity()&&(e.preventDefault(),$("#js-survey-form").addClass("js-hidden"),$.post("/govnotifyemail",{emailaddress:s},function(e){DisplayResponseMessage(e)}))}function DisplayResponseMessage(e){!0===e?(GOVUK.cookie("survey","dismissed",{days:31}),$(".js-survey-complete").removeClass("js-hidden")):$(".js-survey-not-complete").removeClass("js-hidden")}dfc.digital={addFocus:function(e){var s=$(e);s&&s.val()&&0<s.val().length?s.addClass("focus"):s.removeClass("focus")}},$(document).ready(function(){$(".js-search-focus").ready(function(){dfc.digital.addFocus(".js-search-focus")}).focus(function(){dfc.digital.addFocus(this)}).blur(function(){dfc.digital.addFocus(this)}),$(".js-survey_open").click(function(){$("#js-survey-form").removeClass("js-hidden"),$(".js-survey-intro").addClass("js-hidden")}),$(".js-survey_close").click(function(){GOVUK.cookie("survey","dismissed",{days:31}),$(".survey_container").removeClass("visible")}),"dismissed"!==GOVUK.cookie("survey")&&$(".survey_container").addClass("visible"),$(".js-survey-button").click(function(e){sendEmail(e)}),$(".survey_link").click(function(){GOVUK.cookie("survey","dismissed",{days:31})}),$(".filter-na").change(function(){this.checked&&($("input:checked").not(".filter-na").prop("checked",!1),this.change)}),$("input:checkbox").not(".filter-na").change(function(){$(".filter-na").prop("checked")&&$(".filter-na").prop("checked",!1)}),"dismissed"!=GOVUK.cookie("JPsurvey")&&$(".job-profile-feedback").addClass("js-visible"),$("#jp-feedback-yes").click(function(){GOVUK.cookie("JPsurvey","dismissed",{days:31}),$(".job-profile-feedback-start").addClass("hidden"),$(".job-profile-feedback-end-yes").removeClass("hidden")}),$("#jp-feedback-no").click(function(){GOVUK.cookie("JPsurvey","dismissed",{days:31}),$(".job-profile-feedback-start").addClass("hidden"),$(".job-profile-feedback-end-no").removeClass("hidden")}),$("#job-profile-feedback-survey").click(function(e){e.preventDefault();var s=window.location.href;sessionStorage.setItem("profileURL",s),window.location=$(this).attr("href")}),$("#job-profile-feedback-survey-finish").click(function(e){e.preventDefault();var s=sessionStorage.getItem("profileURL");null!==sessionStorage.getItem("profileURL")?window.location=s:window.location=$(this).attr("href")})}),$.extend($.ui.autocomplete.prototype,{_resizeMenu:function(){this.menu.element.outerWidth(this.element[0].clientWidth)}}),$(".js-autocomplete").each(function(){$(this).autocomplete({source:function(e,s){var o=e.term,i=$(".js-autocomplete").data("autocomplete-maxlength");o.length>i||$.ajax({url:$(".js-autocomplete").data("autocomplete-source"),dataType:"json",data:{term:o,maxNumberDisplayed:$(".js-autocomplete").data("autocomplete-maxnumberdisplyed"),fuzzySearch:$(".js-autocomplete").data("autocomplete-fuzzysearch")},success:function(e){s(e)}})},minLength:$(this).data("autocomplete-minlength")})});